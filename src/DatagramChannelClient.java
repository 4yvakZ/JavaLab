import java.io.IOException;
import java.net.*;
import java.nio.ByteBuffer;
import java.nio.channels.DatagramChannel;
import java.nio.charset.StandardCharsets;
import java.util.Scanner;
import java.util.concurrent.TimeoutException;

public class DatagramChannelClient {
    public static void main(String[] args) throws IOException {
        DatagramChannel client = DatagramChannel.open();
        InetSocketAddress socketAddress = new InetSocketAddress("localhost", 1025);
        //client.bind(null);
        client.connect(socketAddress);
        Scanner scanner = new Scanner(System.in);
        try {
            while (true) {
                System.out.print("->");
                String line = scanner.nextLine();
                if (line.equalsIgnoreCase("close")) break;
                if (line.isEmpty()) continue;
                ByteBuffer buffer = ByteBuffer.wrap(line.getBytes());
                client.write(buffer);
                //client.send(buffer, socketAddress);
                buffer.clear();
                ByteBuffer answer = ByteBuffer.allocate(65000);
                //client.receive(answer);
                client.read(answer);
                String reply = new String(answer.array(), 0, answer.position());
                System.out.println(reply);
            }
            client.close();
        }catch (PortUnreachableException e){
            System.out.println("=====**++++++++++==+===========================+++++==========0@@@@@@@0%=======00@@0%===%%%===%%000000\n" +
                    "%%==+*+++++++++===+==========================++**+=++++***++==0@@###@@%=======%0@###@0%=%%%%%%%%@@@@#@\n" +
                    "===+**+++++++++========================+++=+***++===+++******=0@@##@@0========%0@####@0%====%00%%0@@@0\n" +
                    "=+***++++++++++======================+**+==+***+===++*********=@@@@@0%========%0@######@0%==%%@0%==%==\n" +
                    "%==+++++++++++======================+***+=+++*****+++**********+@@@%%==%0%%===%0@########@0%%%%0%%%0%%\n" +
                    "%=++++++++++++=====++++++++++++++===*:*+=+**+++++======+**:*:::**0%===%0@0%===%0@#########@0%===%%%%%%\n" +
                    "==+++++++++++++++*****++++++++++****:*+++*+%%%0%%%==00%=+**:::::**===%@@@0%===%0@########@@0%===%%%%%%\n" +
                    "%=+++++++************+**++***++++++**++=%%@@####@00==%0%=++*::::**+=0@@#@0%===%0@######@@0%%==%%%%%%%%\n" +
                    "==++*******************+**+*******+**+=%0@######@@00%=%%%%=+*:::*++=@@##@0%===%0@####@@0%%%%===%%%%%%%\n" +
                    "==++******+**************************==00@@@#####@@0%%==%%%%=*:**++:%@#@@0%===%0@###@0%%%%0@@000%%%0%%\n" +
                    "==++*********************************+=00@@######@0%%=%%===%=*::****+@#@@0%==%%0@#@@0%%%0@@####@00000%\n" +
                    "==++*****************+++++++++++*****++%%00000@00==+=+=%=%00%+*******0@@@0====%0@@0%%%%0@#######@@@@00\n" +
                    "%=++******************************+**+*===++==%@0%000000@@00%=**+*+**%@@@0====%00%%=%%%0@@###@@@@@@@@0\n" +
                    "%=++*******************++******+++++*++*%%0000@@@000@###@@0%=++*++++*+0@@0======%%%%%%%%%%%%0000@@@@@0\n" +
                    "%=++******************************++*++*=0@@@@@@@000000@@0%====+++++**%000=========%%%%0000%%%=%0@@@@0\n" +
                    "%=++****************:::::::::::****=+++++=0@@00@@0%=+=000%%%%=+++=++**=0@%========%%%0@@@##@@0%%000000\n" +
                    "==++***********::::::::::::::%%=+**=+++++*+00%0%=+*+++=++=%%==+**+++*++=+::+======%000@@@@@00%%%00%00%\n" +
                    "==++********::::::::::::*+@@@@@@@000%=+++*:=%%=++=%%===%00%%==**++++::*:::::+*+===0%%%%@0%====%%%%%0%%\n" +
                    "==++****::::::::::::::::*0@@@@@@00%%%==+**::*===0000@000%%%=++******::::::::::::*+=%=++==+===%00%%%%%%\n" +
                    "==++**:::::::::::::::::*+00=******++==+0%+*:**+=%%%%%%%000=+**:*:::::::::::::::*++***++**++=0@@@0%%%%%\n" +
                    "==++*::::::::::::::*::**0@0=++++**::**=%%+*:**+*+=%%000%==+****+*::::::::::::**++************++==%%%%%\n" +
                    "==++::::::::::::*:::::*=@@0%++++++***+00%=***::*:*+==+++******+++**+*::::::**++++++*****************+=\n" +
                    "==++:::::::::::*::::::+=@@0=++==%0000@00%***:::::*::::::::**+++::*+++*:::*+++++*+++++******+********++\n" +
                    "::*+::::::::::::::::::+=@@@0=+=%0@@@@00=*:::::::*****+**::++*****+=+**+**+=+++**++++++*****++*********\n" +
                    "::::::::::::::::::::::*=@@@0%==0@@@0%++::::::::::**************++=+****+++++++**++++++**+*:++*********\n" +
                    "::::::::::::::::::::::*+=@@00==0@00%+*:::::::*:::::***+***+=++++*+**+*++=+*+++**++*++***++:+++*******+\n" +
                    "---::::::::::::::::::*+*+=%%0%%=0%=*::*::::::::::::***++***+=++**+*+=++++*+++***+++++++*++:+++******++\n" +
                    ":--:--:::::::::::::::++*++++*****:::*:::::::::::::::**++++*+++***++=+++++++++***+++++++++=*++*++**+++=\n" +
                    "-::::--:::::::::::::++**+*+*+**:::::::::::::::::::***++=++*++++***+=++++++++****+++++++++=*+**+*+*+==+\n" +
                    "-:::---::::::::::::*==++*+++**:::::::*::::::::::*:***++++++*+++*+++=+++++++++***+++++++++=*:*+++*+==+*\n" +
                    "::::::::::::::::::*+===++++:**::::::::::::::::::**:***++=++*++*:+++=+++++++++***+==+++++=+*:**+++===+*\n" +
                    "\n" +
                    "█──█─███───██─█────███─████---████─████─████─████─███─████---███─████─█──█---████──███─████─███─█\n" +
                    "█──█─█────█─█─█──────█─█──█---█──█─█──█─█──█─█──█──█──█──█---─█──█──█─█─█─---█──██───█─█──█──█──█───\n" +
                    "████─███─█──█─████─███─████---█──█─████─█──█─█─────█──█──█---─█──████─██──---████──███─████──█──████\n" +
                    "█──█─█───█──█─█──█───█──█─█---█──█─█────█──█─█──█──█──█──█---─█──█──█─█─█─---█──██───█──█─█──█──█──█\n" +
                    "█──█─███─█──█─████─███──█─█---█──█─█────████─████──█──████---─█──█──█─█──█---████──███──█─█──█──████\n" +
                    "\n" +
                    "---█──█---████──█───█─█──█───██─█──██──█──█─█──█─███─█───---████─███─████─████──███─████\n" +
                    "---█──█---█──██─█───█─█─█───█─█─█─█──█─█──█─█──█──█──█───---█──█─█───█──█─█──██─█───█──█\n" +
                    "---█─██---████──███─█─██───█──█─████─█─████─█─██──█──████---█────███─████─████──███─████\n" +
                    "---██─█---█──██─█─█─█─█─█──█──█─█─█──█────█─██─█──█──█──█---█──█─█───█────█──██─█───█\n" +
                    "---█──█---████──███─█─█──█─█──█─█──██─────█─█──█──█──████---████─███─█────████──███─█\n");
        }
    }
}
